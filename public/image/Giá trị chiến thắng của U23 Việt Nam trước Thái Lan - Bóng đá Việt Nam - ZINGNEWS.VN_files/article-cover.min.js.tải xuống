(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{304:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return b}));var a=r(62),i=r.n(a),l=r(3),n=r.n(l),s=r(1),c=r.n(s),o=r(8),d=r.n(o),h=r(6),u=r.n(h),p=r(2),y=r.n(p),m=r(17),f=r(10),$=r(9),v=r(69);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y()(e);if(t){var i=y()(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return u()(this,r)}}var b=function(e){d()(r,e);var t=g(r);function r(e){var a;return n()(this,r),(a=t.call(this,e.app)).app=e.app,a.artUtils=e.artUtils,a.$articleEl=a.artUtils.$articleEl,a.$articleBody=a.artUtils.getArticleBody(),a.$recommend=a.artUtils.getArticleRecommend(),a.$summary=a.artUtils.getArticleSumary(),a.$category=a.artUtils.getArticleCate(),a.$title=a.artUtils.getArticleTitle(),a.$meta=a.artUtils.getArticleMeta(),a.$headerImageTable=a.$articleBody.find("table"),a.$headerImageTable?(a.$headerImage=a.$headerImageTable.find("img"),a.$articleHeader=document.find(".the-article-header"),a.init(),a.fadeArticle(),a):u()(a)}return c()(r,[{key:"name",get:function(){return"CoverModule"}},{key:"defaultOptions",get:function(){return{shareTools:{zalo:!0,fb:!0,clipboard:!0}}}},{key:"layoutType",get:function(){return this.$headerImageTable.align||"left"}},{key:"layoutMode",get:function(){return this.$headerImage.className||"light-mode"}},{key:"headerImageSrc",get:function(){var e=this.$headerImage.getAttribute("data-src")||this.$headerImage.src;return e=e.replace(/\/w\d+\//gi,"/w1920/")}}]),c()(r,[{key:"init",value:function(){try{Object(f.addClass)(this.$articleEl,"the-article-cover"),this.relayoutPagewrapper(),this.renderCustomCateTag(),this.render()}catch(e){}}},{key:"relayoutPagewrapper",value:function(){this.Dom.removeClass(document.find("body > .page-wrapper"),"page-wrapper"),this.$articleEl.prepend(this.$articleHeader),Object($.p)(this.$articleEl.find(".main"),'<div class="page-wrapper"></div>'),this.$recommend&&Object($.p)(this.$recommend,'<div class="page-wrapper"></div>')}},{key:"renderCustomCateTag",value:function(){var e=this.$articleBody.find(":scope > h4:first-child");e&&this.$category&&(this.$category.innerHTML=e.innerHTML)}},{key:"render",value:function(){var e=Object(f.createElFromHTML)("<div class='header-bg' style='background-image: url(".concat(this.headerImageSrc,")'></div>"));switch(this.$articleHeader.insertBefore(e,this.$articleHeader.firstChild),this.$headerOverlay=this.Dom.createElFromHTML('<div class="header-overlay"></div>'),this.$headerOverlay.appendChild(this.$category),this.$headerOverlay.appendChild(this.$title),this.$headerOverlay.appendChild(this.$meta),this.layoutType){case"center":this.$summaryOverlay=this.Dom.createElFromHTML('<div class="sumary-overlay"></div>'),this.$summaryOverlay.appendChild(this.$summary),Object($.g)(this.$articleHeader,this.$summaryOverlay),this.renderShareTool();break;default:this.$headerOverlay.appendChild(this.$summary)}this.$articleHeader.appendChild(this.$headerOverlay);var t=this.layoutMode.split(" ");Object($.a)(this.$articleEl,["".concat(this.layoutType,"-layout")].concat(i()(t))),this.$headerImageTable.remove()}},{key:"renderShareTool",value:function(){var e=new v.a(this.app,this.options.shareTools);this.$headerOverlay.appendChild(e.render())}},{key:"fadeArticle",value:function(){var e=this;setTimeout((function(){e.$articleEl.style.opacity=1}),100)}}]),r}(m.a)}}]);